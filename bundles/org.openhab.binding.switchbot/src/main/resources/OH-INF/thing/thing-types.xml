<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="switchbot"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<bridge-type id="switchbotAccount">
		<label>Switchbot Account</label>
		<description>Access to Switchbot Account. Used to discover devices tied to account.</description>

		<config-description>
			<parameter name="authorizationOpenToken" type="text" required="true">
				<label>Authorization Open Token</label>
				<description>Token as retrieved in the app: a) Go to Profile > Preference b) Tap App Version 10 times. Developer
					Options will show up c) Tap Developer Options d) Tap Get Token</description>
				<context>text</context>
			</parameter>
		</config-description>
	</bridge-type>


	<thing-type id="curtain">
		<supported-bridge-type-refs>
			<bridge-type-ref id="switchbotAccount"/>
		</supported-bridge-type-refs>

		<label>Switchbot Curtain</label>
		<description>Switchbot Curtain</description>

		<channels>
			<channel id="calibrate" typeId="calibrate"/>
			<channel id="moving" typeId="moving"/>
			<channel id="group" typeId="group"/>
			<channel id="slide-position" typeId="slide-position"/>
			<channel id="command" typeId="command"/>
		</channels>

		<config-description>
			<parameter name="deviceId" type="text" required="true">
				<label>device id</label>
				<description>The id of the device</description>
			</parameter>
			<parameter name="refreshInterval" type="integer" unit="s" min="30">
				<label>Refresh Interval</label>
				<description>Interval the device is polled in sec (API allows 1000 calls per day per account).</description>
				<default>600</default>
			</parameter>
			<parameter name="group" type="boolean" required="true">
				<label>Is a group</label>
				<description>Indicates if this thing represents a group of curtain bots</description>
			</parameter>
		</config-description>
	</thing-type>

	<thing-type id="hubmini">
		<supported-bridge-type-refs>
			<bridge-type-ref id="switchbotAccount"/>
		</supported-bridge-type-refs>

		<label>Switchbot Hub Mini</label>
		<description>Switchbot Hub Mini</description>

		<channels>
			<channel id="command" typeId="command"/>
		</channels>

		<config-description>
			<parameter name="deviceId" type="text" required="true">
				<label>device id</label>
				<description>The id of the device</description>
			</parameter>
		</config-description>
	</thing-type>


	<channel-type id="calibrate">
		<item-type>Switch</item-type>
		<label>Is Calibrated</label>
		<description>Indicates if it has been calibrated</description>
		<state readOnly="true" pattern="%s"/>
	</channel-type>

	<channel-type id="moving">
		<item-type>Switch</item-type>
		<label>Moving</label>
		<description>Indicates if the bot is currently moving</description>
		<state readOnly="true" pattern="%s"/>
	</channel-type>

	<channel-type id="group">
		<item-type>Switch</item-type>
		<label>Is a Group</label>
		<description>Indicates if this bot is part of a dual setup group.</description>
		<state readOnly="true" pattern="%s"/>
	</channel-type>

	<channel-type id="slide-position">
		<item-type>Number</item-type>
		<label>Slide Position</label>
		<description>Indicates how far the curtain is open</description>
		<state readOnly="false" pattern="%d"/>
	</channel-type>

	<channel-type id="command">
		<item-type>String</item-type>
		<label>Send Command</label>
		<description>Send Commands to Switchbot Curtain. (turnOff is closed, turnOn is open)</description>
		<state readOnly="false" pattern="%s">
			<options>
				<option value="turnOff">turnOff</option>
				<option value="turnOn">turnOn</option>
				<option value="open">open</option>
				<option value="close">close</option>
			</options>
		</state>
	</channel-type>


</thing:thing-descriptions>
